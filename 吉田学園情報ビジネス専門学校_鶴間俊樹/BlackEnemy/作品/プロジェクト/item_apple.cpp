//=============================================================================
//
// リンゴアイテム処理 [item_apple.cpp]
// Author : 鶴間俊樹
//
//=============================================================================
#include "item_apple.h"
#include "effect.h"

//=============================================================================
// マクロ定義
//=============================================================================
#define COLLISION_RADIUS (15.0f)	//当たり判定の半径

//=============================================================================
// デフォルトコンストラクタ
//=============================================================================
CItemApple::CItemApple()
{

}

//=============================================================================
// オーバーロードされたコンストラクタ
//=============================================================================
CItemApple::CItemApple(D3DXVECTOR3 pos) : CItem(CModel::MODELTYPE::ITEM_APPLE, pos, D3DXVECTOR3(0.0f, 0.0f, 0.0f), false)
{

}

//=============================================================================
// デストラクタ
//=============================================================================
CItemApple::~CItemApple()
{

}

//=============================================================================
// リンゴアイテムの生成処理
//=============================================================================
CItemApple* CItemApple::Create(D3DXVECTOR3 pos) {
	CItemApple* pItemApple;
	pItemApple = new CItemApple(pos);
	if (pItemApple != nullptr) {
		pItemApple->Init();
	}

	return pItemApple;
}

//=============================================================================
// リンゴアイテムの初期化処理
//=============================================================================
HRESULT CItemApple::Init(void) {
	CItem::Init();
	return S_OK;
}

//=============================================================================
// リンゴアイテムの終了処理
//=============================================================================
void CItemApple::Uninit(void) {
	CItem::Uninit();
}

//=============================================================================
// リンゴアイテムの更新処理
//=============================================================================
void CItemApple::Update(void) {
	CItem::Update();
}

//=============================================================================
// リンゴアイテムの描画処理
//=============================================================================
void CItemApple::Draw(void) {
	CItem::Draw();
}

//=============================================================================
// リンゴアイテムの当たり判定の半径の取得
//=============================================================================
float CItemApple::GetRadius(void) {
	return COLLISION_RADIUS;
}

//=============================================================================
// リンゴアイテムがオブジェクトと衝突したときの処理
//=============================================================================
void CItemApple::CollisionObject(CScene* pScene) {
	if (pScene != nullptr) {
		bool bGetItem = false;	//アイテムが取得されたかどうか
		bGetItem = pScene->GetItem((int)ITEM_TYPE::APPLE);
		if (bGetItem) {
			//エフェクトの生成
			CEffect::Create(D3DXVECTOR3(GetPos().x, GetPos().y + 25.0f, GetPos().z), CEffect::EFFECT_TYPE::GET_ITEM, 50.0f, 50.0f);
			//アイテムの破棄
			Uninit();
		}
	}
}